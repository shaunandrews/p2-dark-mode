/**
 * P2 Dark Mode Stylesheet
 * 
 * Single dark background color everywhere. Simple.
 * Uses CSS media query for instant application (no flash).
 */

/* Apply immediately via media query - no JS needed for initial paint */
@media (prefers-color-scheme: dark) {
  html, body {
    background-color: #1a1a1a !important;
    color: #c9c9c9 !important;
  }
}

/* THE ONE BACKGROUND COLOR */
.p2-dark-mode-enabled {
  --p2-dark-bg: #1a1a1a;
  --p2-dark-text: #c9c9c9;
  --p2-dark-text-bright: #e6e6e6;
  --p2-dark-text-dim: #8c8c8c;
  --p2-dark-link: #56a7d7;
  --p2-dark-border: #3a3a3a;
}

/* ==========================================================================
   EVERYTHING GETS THE SAME BACKGROUND
   ========================================================================== */

.p2-dark-mode-enabled,
.p2-dark-mode-enabled body,
.p2-dark-mode-enabled main,
.p2-dark-mode-enabled #content,
.p2-dark-mode-enabled article,
.p2-dark-mode-enabled .post,
.p2-dark-mode-enabled .hentry,
.p2-dark-mode-enabled .o2-post,
.p2-dark-mode-enabled .p2020-post,
.p2-dark-mode-enabled .o2-app,
.p2-dark-mode-enabled header.entry-header,
.p2-dark-mode-enabled .entry-header,
.p2-dark-mode-enabled footer.entry-meta,
.p2-dark-mode-enabled .entry-meta,
.p2-dark-mode-enabled .entry-content,
.p2-dark-mode-enabled aside,
.p2-dark-mode-enabled .widget,
.p2-dark-mode-enabled .comment,
.p2-dark-mode-enabled .o2-comment,
.p2-dark-mode-enabled .o2-post-comments,
.p2-dark-mode-enabled .thread-odd,
.p2-dark-mode-enabled .thread-even,
.p2-dark-mode-enabled .thread-alt,
.p2-dark-mode-enabled .depth-1,
.p2-dark-mode-enabled .depth-2,
.p2-dark-mode-enabled .depth-3,
.p2-dark-mode-enabled [class*="depth-"],
.p2-dark-mode-enabled .o2-editor,
.p2-dark-mode-enabled .o2-editor-wrapper,
.p2-dark-mode-enabled #respond,
.p2-dark-mode-enabled .comment-respond,
.p2-dark-mode-enabled blockquote,
.p2-dark-mode-enabled pre,
.p2-dark-mode-enabled code {
  background-color: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* ==========================================================================
   GITHUB EMBEDS - Override inline styles
   ========================================================================== */

.p2-dark-mode-enabled .wp-block-p2-embed-github,
.p2-dark-mode-enabled .wp-block-p2-embed-github__main,
.p2-dark-mode-enabled .wp-block-p2-embed-github__left-container,
.p2-dark-mode-enabled .wp-block-p2-embed-github__right-container,
.p2-dark-mode-enabled .wp-block-p2-embed-github__pr,
.p2-dark-mode-enabled .wp-block-p2-embed-github__pr-content,
.p2-dark-mode-enabled .wp-block-p2-embed-github__pr-title,
.p2-dark-mode-enabled .wp-block-p2-embed-github__pr-description,
.p2-dark-mode-enabled .wp-block-p2-embed-github__rehydrate-placeholder,
.p2-dark-mode-enabled [class*="wp-block-p2-embed-github"],
.p2-dark-mode-enabled div[class*="wp-block-p2-embed-github"][style] {
  background-color: #1a1a1a !important;
  background: #1a1a1a !important;
}

/* GitHub embed has-background class with inline style - nuclear override */
.p2-dark-mode-enabled .has-background,
.p2-dark-mode-enabled [style*="background-color"] {
  background-color: #1a1a1a !important;
}

.p2-dark-mode-enabled .wp-block-p2-embed-github__pr-title-text,
.p2-dark-mode-enabled .wp-block-p2-embed-github__pr-title a,
.p2-dark-mode-enabled .wp-block-p2-embed-github a {
  color: #56a7d7 !important;
}

.p2-dark-mode-enabled .wp-block-p2-embed-github__type-badge {
  background-color: #2a5a2a !important;
  color: #7dd87d !important;
}

/* ==========================================================================
   COMMENT EDITOR - Block editor components
   ========================================================================== */

.p2-dark-mode-enabled .p2-editor,
.p2-dark-mode-enabled .p2-editor__comment,
.p2-dark-mode-enabled .iso-editor,
.p2-dark-mode-enabled .iso-editor__selected,
.p2-dark-mode-enabled .block-editor,
.p2-dark-mode-enabled .edit-post-layout,
.p2-dark-mode-enabled .editor-header,
.p2-dark-mode-enabled .edit-post-header,
.p2-dark-mode-enabled .interface-interface-skeleton,
.p2-dark-mode-enabled .interface-interface-skeleton__header,
.p2-dark-mode-enabled .interface-interface-skeleton__body,
.p2-dark-mode-enabled .interface-navigable-region,
.p2-dark-mode-enabled .editor-styles-wrapper,
.p2-dark-mode-enabled .block-editor-block-list__layout,
.p2-dark-mode-enabled [class*="interface-"],
.p2-dark-mode-enabled [class*="editor-"],
.p2-dark-mode-enabled [class*="block-editor-"] {
  background-color: #1a1a1a !important;
  background: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* Editor toolbar */
.p2-dark-mode-enabled .components-toolbar,
.p2-dark-mode-enabled .block-editor-block-toolbar,
.p2-dark-mode-enabled .editor-header__toolbar {
  background-color: #1a1a1a !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled .components-toolbar button,
.p2-dark-mode-enabled .components-button {
  color: #c9c9c9 !important;
}

/* ==========================================================================
   HEADINGS
   ========================================================================== */

.p2-dark-mode-enabled h1,
.p2-dark-mode-enabled h2,
.p2-dark-mode-enabled h3,
.p2-dark-mode-enabled h4,
.p2-dark-mode-enabled h5,
.p2-dark-mode-enabled h6,
.p2-dark-mode-enabled .entry-title,
.p2-dark-mode-enabled .entry-title a {
  color: #e6e6e6 !important;
  background-color: transparent !important;
}

/* ==========================================================================
   LINKS - No background, just color
   ========================================================================== */

.p2-dark-mode-enabled a {
  color: #56a7d7 !important;
  background-color: transparent !important;
}

.p2-dark-mode-enabled a:hover {
  color: #7abce6 !important;
}

/* Mentions - same deal, no special bg */
.p2-dark-mode-enabled a[href*="/mentions/"],
.p2-dark-mode-enabled .o2-mention {
  color: #56a7d7 !important;
  background-color: transparent !important;
}

/* ==========================================================================
   TAGS - Simple dark bg
   ========================================================================== */

.p2-dark-mode-enabled a.tag,
.p2-dark-mode-enabled .tag {
  background-color: #1a1a1a !important;
  color: #56a7d7 !important;
  border: 1px solid #3a3a3a !important;
}

/* ==========================================================================
   META TEXT
   ========================================================================== */

.p2-dark-mode-enabled time,
.p2-dark-mode-enabled .comment-date,
.p2-dark-mode-enabled small,
.p2-dark-mode-enabled .entry-meta a {
  color: #8c8c8c !important;
}

/* ==========================================================================
   BUTTONS
   ========================================================================== */

.p2-dark-mode-enabled button,
.p2-dark-mode-enabled input[type="submit"],
.p2-dark-mode-enabled .button {
  background-color: #2e2e2e !important;
  color: #e6e6e6 !important;
  border-color: #3a3a3a !important;
}

/* ==========================================================================
   INPUTS
   ========================================================================== */

.p2-dark-mode-enabled input,
.p2-dark-mode-enabled textarea,
.p2-dark-mode-enabled select {
  background-color: #1a1a1a !important;
  color: #e6e6e6 !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled input::placeholder,
.p2-dark-mode-enabled textarea::placeholder {
  color: #8c8c8c !important;
}

/* ==========================================================================
   BORDERS
   ========================================================================== */

.p2-dark-mode-enabled hr {
  border-color: #3a3a3a !important;
  background-color: #3a3a3a !important;
}

/* Make borders match dark bg */
.p2-dark-mode-enabled .o2-post-comments,
.p2-dark-mode-enabled .o2-post,
.p2-dark-mode-enabled .comment,
.p2-dark-mode-enabled article,
.p2-dark-mode-enabled .entry-content,
.p2-dark-mode-enabled [class*="o2-"] {
  border-color: #1a1a1a !important;
  border-bottom-color: #1a1a1a !important;
  border-top-color: #1a1a1a !important;
}

/* ==========================================================================
   NAV LINKS (prev/next)
   ========================================================================== */

.p2-dark-mode-enabled nav,
.p2-dark-mode-enabled .navigation {
  background-color: #1a1a1a !important;
}

/* ==========================================================================
   AI SUMMARY BLOCK
   ========================================================================== */

.p2-dark-mode-enabled .ai-summary,
.p2-dark-mode-enabled .ai-summary__header,
.p2-dark-mode-enabled .ai-summary__content,
.p2-dark-mode-enabled .ai-summary__text,
.p2-dark-mode-enabled div.ai-summary__content {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  color: #c9c9c9 !important;
  border-color: #3a3a3a !important;
}

/* AI summary feedback buttons */
.p2-dark-mode-enabled .ai-summary button,
.p2-dark-mode-enabled .ai-summary a {
  color: #56a7d7 !important;
}

/* ==========================================================================
   TIPPY DROPDOWNS / POPOVERS
   ========================================================================== */

.p2-dark-mode-enabled .tippy-box,
.p2-dark-mode-enabled .tippy-box[data-theme="p2-menu"],
.p2-dark-mode-enabled .tippy-content,
.p2-dark-mode-enabled div.tippy-content {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  color: #c9c9c9 !important;
  border-color: #3a3a3a !important;
}

/* Tippy arrow */
.p2-dark-mode-enabled .tippy-box[data-theme="p2-menu"] > .tippy-arrow::before,
.p2-dark-mode-enabled .tippy-arrow::before {
  border-bottom-color: #1a1a1a !important;
  border-top-color: #1a1a1a !important;
}

/* Menu items inside tippy */
.p2-dark-mode-enabled .tippy-content button,
.p2-dark-mode-enabled .tippy-content a,
.p2-dark-mode-enabled .tippy-box button,
.p2-dark-mode-enabled .tippy-box a {
  background: transparent !important;
  color: #c9c9c9 !important;
}

.p2-dark-mode-enabled .tippy-content button:hover,
.p2-dark-mode-enabled .tippy-content a:hover,
.p2-dark-mode-enabled .tippy-box button:hover,
.p2-dark-mode-enabled .tippy-box a:hover {
  background: #2e2e2e !important;
}

/* O2 dropdown actions */
.p2-dark-mode-enabled .o2-dropdown-actions,
.p2-dark-mode-enabled .o2-post-actions,
.p2-dark-mode-enabled .o2-dropdown-actions-disclosure {
  background: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* Feed modifier / Filter and Sort dropdown */
.p2-dark-mode-enabled .p2-app-ctl__menu,
.p2-dark-mode-enabled .p2020-feed-modifier,
.p2-dark-mode-enabled .p2020-feed-modifier__filter-section,
.p2-dark-mode-enabled .p2020-feed-modifier__sort-section,
.p2-dark-mode-enabled .p2020-feed-modifier__action-section,
.p2-dark-mode-enabled .p2020-feed-modifier__item-line {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* Filter labels and text */
.p2-dark-mode-enabled .p2020-feed-modifier label,
.p2-dark-mode-enabled .p2020-feed-modifier legend,
.p2-dark-mode-enabled .p2020-feed-modifier span,
.p2-dark-mode-enabled .p2020-feed-modifier__item-line label,
.p2-dark-mode-enabled .p2-app-ctl__menu label,
.p2-dark-mode-enabled .p2-app-ctl__menu span {
  color: #c9c9c9 !important;
}

/* Section headers (SORT BY, etc) */
.p2-dark-mode-enabled .p2020-feed-modifier fieldset legend,
.p2-dark-mode-enabled .p2020-feed-modifier__section-separator {
  color: #8c8c8c !important;
  border-color: #3a3a3a !important;
}

/* Apply button */
.p2-dark-mode-enabled .p2020-feed-modifier button,
.p2-dark-mode-enabled .p2-app-ctl__menu button {
  color: #56a7d7 !important;
}

/* ==========================================================================
   SIDEBAR - P2020 theme
   ========================================================================== */

/* Override P2's CSS custom properties for sidebar */
.p2-dark-mode-enabled {
  --p2-color-sidebar-background: #1a1a1a !important;
  --p2-color-background-dark: #1a1a1a !important;
  --p2-color-sidebar-text: #c9c9c9 !important;
  --p2-color-sidebar-link: #56a7d7 !important;
  --p2-color-border: #3a3a3a !important;
}

/* Main sidebar container - nuke the gradient */
.p2-dark-mode-enabled #sidebar,
.p2-dark-mode-enabled .p2020-sidebar,
.p2-dark-mode-enabled #sidebar.p2020-sidebar,
.p2-dark-mode-enabled div#sidebar.p2020-sidebar {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  background-image: none !important;
}

/* Sidebar scroll area */
.p2-dark-mode-enabled .p2020-sidebar__scroll-hider,
.p2-dark-mode-enabled .p2020-sidebar__scroll-area-content,
.p2-dark-mode-enabled .p2020-sidebar__main,
.p2-dark-mode-enabled .p2020-sidebar__scrollbar {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
}

/* Sidebar footer */
.p2-dark-mode-enabled .p2020-sidebar__footer,
.p2-dark-mode-enabled footer.p2020-sidebar__footer {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  color: #8c8c8c !important;
}

.p2-dark-mode-enabled .p2020-sidebar__footer a {
  color: #56a7d7 !important;
}

/* Sidebar info box (site header area) */
.p2-dark-mode-enabled .p2020-sidebar-info,
.p2-dark-mode-enabled div.p2020-sidebar-info {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled .p2020-sidebar-info__site-info,
.p2-dark-mode-enabled .p2020-sidebar-info__header,
.p2-dark-mode-enabled .p2020-sidebar-info__blogdescription,
.p2-dark-mode-enabled .p2020-sidebar-info__follow {
  background: transparent !important;
  color: #c9c9c9 !important;
}

.p2-dark-mode-enabled .p2020-sidebar-info__blogdescription {
  color: #8c8c8c !important;
}

/* Site title in sidebar */
.p2-dark-mode-enabled .p2020-sidebar-info__header a,
.p2-dark-mode-enabled #p2020-sidebar-site-icon-container {
  color: #56a7d7 !important;
}

/* Sidebar navigation */
.p2-dark-mode-enabled .p2020-bookmarks,
.p2-dark-mode-enabled .p2020-nav-menu-widget,
.p2-dark-mode-enabled .p2020-my-team-widget,
.p2-dark-mode-enabled .widget,
.p2-dark-mode-enabled aside.widget {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* Widget borders */
.p2-dark-mode-enabled .p2020-sidebar-padded-container {
  border-color: #3a3a3a !important;
}

/* Toggle sidebar button */
.p2-dark-mode-enabled .p2020-toggle-sidebar-button {
  background: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* ==========================================================================
   PROTECTED MEDIA
   ========================================================================== */

.p2-dark-mode-enabled img,
.p2-dark-mode-enabled video,
.p2-dark-mode-enabled iframe,
.p2-dark-mode-enabled .avatar {
  filter: none !important;
}

/* ==========================================================================
   SCROLLBARS
   ========================================================================== */

.p2-dark-mode-enabled ::-webkit-scrollbar {
  background-color: #1a1a1a;
}

.p2-dark-mode-enabled ::-webkit-scrollbar-thumb {
  background-color: #3a3a3a;
}

/* ==========================================================================
   SELECTION
   ========================================================================== */

.p2-dark-mode-enabled ::selection {
  background-color: #3a5a7a !important;
  color: #e6e6e6 !important;
}
