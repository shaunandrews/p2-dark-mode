/**
 * P2 Dark Mode Stylesheet
 * 
 * Designed dark palette for comfortable night reading.
 * Triggered by .p2-dark-mode-enabled class added by content script.
 * 
 * Uses !important to override P2 theme specificity.
 */

/* ==========================================================================
   Color Palette (CSS Custom Properties)
   ========================================================================== */

.p2-dark-mode-enabled {
  --p2-bg-primary: #1a1a1a;
  --p2-bg-secondary: #242424;
  --p2-bg-tertiary: #2e2e2e;
  --p2-text-primary: #e6e6e6;
  --p2-text-secondary: #c9c9c9;
  --p2-text-tertiary: #8c8c8c;
  --p2-link: #56a7d7;
  --p2-link-hover: #7abce6;
  --p2-border: #3a3a3a;
  --p2-blockquote-border: #5b7aed;
  --p2-blockquote-bg: #1e2440;
  --p2-code-bg: #2d2d2d;
  --p2-mention-bg: #2c3e4a;
}

/* ==========================================================================
   P2-Specific Global Overrides
   ========================================================================== */

/* Body backgrounds */
body.p2-dark-mode-enabled,
.p2-dark-mode-enabled {
  background-color: #1a1a1a !important;
  color: #c9c9c9 !important;
}

/* Main content area */
.p2-dark-mode-enabled main,
.p2-dark-mode-enabled main#content,
.p2-dark-mode-enabled #content,
.p2-dark-mode-enabled .site-content,
.p2-dark-mode-enabled .o2-app {
  background-color: #1a1a1a !important;
}

/* Article / Post - THE KEY FIX */
.p2-dark-mode-enabled article,
.p2-dark-mode-enabled article.post,
.p2-dark-mode-enabled .post,
.p2-dark-mode-enabled .type-post,
.p2-dark-mode-enabled .hentry,
.p2-dark-mode-enabled .o2-post,
.p2-dark-mode-enabled .o2-posts,
.p2-dark-mode-enabled #o2-wrapper,
body.p2-dark-mode-enabled article.post.type-post.status-publish,
html.p2-dark-mode-enabled body article,
html body.p2-dark-mode-enabled article {
  background-color: #1a1a1a !important;
}

/* NUCLEAR: Target ANY element with white background inside enabled body */
body.p2-dark-mode-enabled article[class*="post"] {
  background-color: #1a1a1a !important;
}

/* Post content inner wrappers */
.p2-dark-mode-enabled article > div,
.p2-dark-mode-enabled article > div > div,
.p2-dark-mode-enabled .entry-content,
.p2-dark-mode-enabled .o2-post-content {
  background-color: #1a1a1a !important;
}

/* ==========================================================================
   P2 Sidebar
   ========================================================================== */

.p2-dark-mode-enabled .p2020-sidebar,
.p2-dark-mode-enabled .o2-sidebar,
.p2-dark-mode-enabled aside,
.p2-dark-mode-enabled [role="complementary"] {
  background-color: #242424 !important;
  color: #c9c9c9 !important;
}

.p2-dark-mode-enabled .p2020-sidebar-site-title,
.p2-dark-mode-enabled .p2020-sidebar-site-description {
  color: #e6e6e6 !important;
}

.p2-dark-mode-enabled .widget,
.p2-dark-mode-enabled .widget_text {
  background-color: transparent !important;
  color: #c9c9c9 !important;
}

.p2-dark-mode-enabled .widget h2,
.p2-dark-mode-enabled .widget h3,
.p2-dark-mode-enabled .widget h4,
.p2-dark-mode-enabled .widget-title {
  color: #e6e6e6 !important;
}

/* ==========================================================================
   Typography - Headings
   ========================================================================== */

.p2-dark-mode-enabled h1,
.p2-dark-mode-enabled h2,
.p2-dark-mode-enabled h3,
.p2-dark-mode-enabled h4,
.p2-dark-mode-enabled h5,
.p2-dark-mode-enabled h6,
.p2-dark-mode-enabled .entry-title,
.p2-dark-mode-enabled .entry-title a {
  color: #e6e6e6 !important;
}

/* ==========================================================================
   Typography - Body Text
   ========================================================================== */

.p2-dark-mode-enabled p,
.p2-dark-mode-enabled li,
.p2-dark-mode-enabled .entry-content,
.p2-dark-mode-enabled .entry-content p,
.p2-dark-mode-enabled .entry-content li,
.p2-dark-mode-enabled .o2-post-content,
.p2-dark-mode-enabled .o2-post-content p {
  color: #c9c9c9 !important;
}

/* ==========================================================================
   Typography - Meta & Timestamps
   ========================================================================== */

.p2-dark-mode-enabled .entry-meta,
.p2-dark-mode-enabled .entry-meta a,
.p2-dark-mode-enabled time,
.p2-dark-mode-enabled .comment-date,
.p2-dark-mode-enabled .o2-timestamp,
.p2-dark-mode-enabled .o2-post-meta,
.p2-dark-mode-enabled small {
  color: #8c8c8c !important;
}

/* ==========================================================================
   Links
   ========================================================================== */

.p2-dark-mode-enabled a {
  color: #56a7d7 !important;
}

.p2-dark-mode-enabled a:hover,
.p2-dark-mode-enabled a:focus {
  color: #7abce6 !important;
}

.p2-dark-mode-enabled .entry-title a {
  color: #e6e6e6 !important;
}

.p2-dark-mode-enabled .entry-title a:hover {
  color: #56a7d7 !important;
}

/* Mention links (@username) */
.p2-dark-mode-enabled a[href*="/mentions/"],
.p2-dark-mode-enabled .o2-mention {
  color: #56a7d7 !important;
  background-color: #2c3e4a !important;
  padding: 0.1em 0.3em;
  border-radius: 3px;
}

/* ==========================================================================
   Comments - P2 O2 System
   ========================================================================== */

.p2-dark-mode-enabled .comment,
.p2-dark-mode-enabled .o2-comment,
.p2-dark-mode-enabled .comment-body,
.p2-dark-mode-enabled .o2-comment-content {
  background-color: #242424 !important;
  color: #c9c9c9 !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled .comment-author,
.p2-dark-mode-enabled .o2-comment-author,
.p2-dark-mode-enabled .comment-author a {
  color: #e6e6e6 !important;
}

.p2-dark-mode-enabled .comment .comment,
.p2-dark-mode-enabled .o2-comment .o2-comment {
  background-color: #2e2e2e !important;
}

.p2-dark-mode-enabled .comment-reply-link,
.p2-dark-mode-enabled .o2-post-reply,
.p2-dark-mode-enabled .o2-reply {
  color: #56a7d7 !important;
  background-color: transparent !important;
}

.p2-dark-mode-enabled .comments-count,
.p2-dark-mode-enabled #comments-count {
  color: #e6e6e6 !important;
}

/* ==========================================================================
   AI Summary Box
   ========================================================================== */

.p2-dark-mode-enabled .ai-summary,
.p2-dark-mode-enabled [class*="ai-summary"],
.p2-dark-mode-enabled .wp-block-p2-ai-summary,
.p2-dark-mode-enabled [class*="AiSummary"],
.p2-dark-mode-enabled [class*="aisummary"] {
  background-color: #242424 !important;
  border-color: #3a3a3a !important;
  color: #c9c9c9 !important;
}

/* Target the AI summary wrapper div */
.p2-dark-mode-enabled article > div > div:first-child {
  background-color: #1a1a1a !important;
}

/* ==========================================================================
   Blockquotes
   ========================================================================== */

.p2-dark-mode-enabled blockquote {
  background-color: #1e2440 !important;
  border-left-color: #5b7aed !important;
  border-left-width: 4px;
  border-left-style: solid;
  color: #c9c9c9 !important;
}

.p2-dark-mode-enabled blockquote p {
  color: #c9c9c9 !important;
}

/* ==========================================================================
   Code Blocks
   ========================================================================== */

.p2-dark-mode-enabled code,
.p2-dark-mode-enabled pre,
.p2-dark-mode-enabled pre code,
.p2-dark-mode-enabled .wp-block-code {
  background-color: #2d2d2d !important;
  color: #c9c9c9 !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled p code,
.p2-dark-mode-enabled li code {
  background-color: #2d2d2d !important;
  color: #c9c9c9 !important;
  padding: 0.15em 0.4em;
  border-radius: 3px;
}

/* ==========================================================================
   Forms & Inputs
   ========================================================================== */

.p2-dark-mode-enabled input,
.p2-dark-mode-enabled textarea,
.p2-dark-mode-enabled select {
  background-color: #2e2e2e !important;
  color: #e6e6e6 !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled input::placeholder,
.p2-dark-mode-enabled textarea::placeholder {
  color: #8c8c8c !important;
}

.p2-dark-mode-enabled button,
.p2-dark-mode-enabled input[type="submit"],
.p2-dark-mode-enabled input[type="button"],
.p2-dark-mode-enabled .button {
  background-color: #2e2e2e !important;
  color: #e6e6e6 !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled button:hover,
.p2-dark-mode-enabled .button:hover {
  background-color: #3a3a3a !important;
}

/* ==========================================================================
   GitHub Embeds
   ========================================================================== */

.p2-dark-mode-enabled .wp-block-p2-embed-github,
.p2-dark-mode-enabled [class*="wp-block-p2-embed"] {
  background-color: #242424 !important;
  border-color: #3a3a3a !important;
}

.p2-dark-mode-enabled .wp-block-p2-embed-github__type-badge {
  background-color: #2e2e2e !important;
  color: #c9c9c9 !important;
}

/* ==========================================================================
   Tooltips & Popovers
   ========================================================================== */

.p2-dark-mode-enabled [role="tooltip"],
.p2-dark-mode-enabled .tooltip,
.p2-dark-mode-enabled .o2-tooltip {
  background-color: #242424 !important;
  color: #e6e6e6 !important;
  border-color: #3a3a3a !important;
}

/* ==========================================================================
   Borders & Dividers
   ========================================================================== */

.p2-dark-mode-enabled hr {
  border-color: #3a3a3a !important;
  background-color: #3a3a3a !important;
}

/* ==========================================================================
   Lists
   ========================================================================== */

.p2-dark-mode-enabled ul,
.p2-dark-mode-enabled ol {
  color: #c9c9c9 !important;
}

.p2-dark-mode-enabled li {
  background-color: transparent !important;
}

/* ==========================================================================
   Protected Media Elements
   ========================================================================== */

.p2-dark-mode-enabled img,
.p2-dark-mode-enabled video,
.p2-dark-mode-enabled iframe,
.p2-dark-mode-enabled canvas,
.p2-dark-mode-enabled .avatar,
.p2-dark-mode-enabled img.avatar {
  filter: none !important;
}

/* ==========================================================================
   Scrollbars (Webkit)
   ========================================================================== */

.p2-dark-mode-enabled ::-webkit-scrollbar {
  background-color: #242424;
}

.p2-dark-mode-enabled ::-webkit-scrollbar-thumb {
  background-color: #3a3a3a;
  border-radius: 4px;
}

/* ==========================================================================
   Selection Highlight
   ========================================================================== */

.p2-dark-mode-enabled ::selection {
  background-color: #2c3e4a !important;
  color: #e6e6e6 !important;
}

.p2-dark-mode-enabled ::-moz-selection {
  background-color: #2c3e4a !important;
  color: #e6e6e6 !important;
}
