/**
 * P2 Dark Mode Stylesheet
 * 
 * Designed dark palette for comfortable night reading.
 * Only applies when system is set to dark mode.
 * 
 * Uses !important to override P2 theme specificity.
 */

@media (prefers-color-scheme: dark) {

  /* ==========================================================================
     Color Palette (CSS Custom Properties)
     ========================================================================== */
  
  :root {
    --p2-bg-primary: #1a1a1a;
    --p2-bg-secondary: #242424;
    --p2-bg-tertiary: #2e2e2e;
    --p2-text-primary: #e6e6e6;
    --p2-text-secondary: #c9c9c9;
    --p2-text-tertiary: #8c8c8c;
    --p2-link: #56a7d7;
    --p2-link-hover: #7abce6;
    --p2-border: #3a3a3a;
    --p2-blockquote-border: #5b7aed;
    --p2-blockquote-bg: #1e2440;
    --p2-code-bg: #2d2d2d;
    --p2-mention-bg: #2c3e4a;
  }

  /* ==========================================================================
     P2-Specific Global Overrides (high specificity + !important)
     ========================================================================== */
  
  /* Body - target P2 specific classes */
  body,
  body.o2,
  body.a8c-p2,
  body.wp-theme-pubp2020,
  body.jps-theme-pub\/p2020 {
    background-color: #1a1a1a !important;
    color: #c9c9c9 !important;
  }

  /* Main content area */
  main,
  main#content,
  #content,
  .site-content,
  .o2-app {
    background-color: #1a1a1a !important;
  }

  /* Article / Post */
  article,
  article.post,
  .post,
  .type-post,
  .hentry {
    background-color: #1a1a1a !important;
  }

  /* P2 post content wrapper */
  .o2-post,
  .o2-posts,
  #o2-wrapper {
    background-color: #1a1a1a !important;
  }

  /* ==========================================================================
     P2 Sidebar
     ========================================================================== */
  
  /* Sidebar wrapper */
  .p2020-sidebar,
  .o2-sidebar,
  aside,
  [role="complementary"] {
    background-color: #242424 !important;
    color: #c9c9c9 !important;
  }

  /* Sidebar header area */
  .p2020-sidebar-site-title,
  .p2020-sidebar-site-description {
    color: #e6e6e6 !important;
  }

  /* Widget areas */
  .widget,
  .widget_text {
    background-color: transparent !important;
    color: #c9c9c9 !important;
  }

  .widget h2,
  .widget h3,
  .widget h4,
  .widget-title {
    color: #e6e6e6 !important;
  }

  /* ==========================================================================
     Typography - Headings
     ========================================================================== */
  
  h1, h2, h3, h4, h5, h6,
  .entry-title,
  .entry-title a,
  article h1,
  article h2,
  article h3 {
    color: #e6e6e6 !important;
  }

  /* ==========================================================================
     Typography - Body Text
     ========================================================================== */
  
  p,
  li,
  .entry-content,
  .entry-content p,
  .entry-content li,
  .o2-post-content,
  .o2-post-content p {
    color: #c9c9c9 !important;
  }

  /* ==========================================================================
     Typography - Meta & Timestamps
     ========================================================================== */
  
  .entry-meta,
  .entry-meta a,
  time,
  .comment-date,
  .o2-timestamp,
  .o2-post-meta,
  small {
    color: #8c8c8c !important;
  }

  /* ==========================================================================
     Links
     ========================================================================== */
  
  a {
    color: #56a7d7 !important;
  }

  a:hover,
  a:focus {
    color: #7abce6 !important;
  }

  /* Keep entry title links lighter */
  .entry-title a {
    color: #e6e6e6 !important;
  }

  .entry-title a:hover {
    color: #56a7d7 !important;
  }

  /* Mention links (@username) */
  a[href*="/mentions/"],
  .o2-mention {
    color: #56a7d7 !important;
    background-color: #2c3e4a !important;
    padding: 0.1em 0.3em;
    border-radius: 3px;
  }

  /* P2 cross-links (+p2name) */
  a[href*="wordpress.com"] {
    color: #56a7d7 !important;
  }

  /* ==========================================================================
     Comments - P2 O2 System
     ========================================================================== */
  
  .comment,
  .o2-comment,
  .comment-body,
  .o2-comment-content {
    background-color: #242424 !important;
    color: #c9c9c9 !important;
    border-color: #3a3a3a !important;
  }

  .comment-author,
  .o2-comment-author,
  .comment-author a {
    color: #e6e6e6 !important;
  }

  .comment-date,
  .o2-comment-date {
    color: #8c8c8c !important;
  }

  /* Nested comments */
  .comment .comment,
  .o2-comment .o2-comment {
    background-color: #2e2e2e !important;
  }

  /* Reply/action links */
  .comment-reply-link,
  .o2-post-reply,
  .o2-reply {
    color: #56a7d7 !important;
    background-color: transparent !important;
  }

  /* Comments count header */
  .comments-count,
  #comments-count {
    color: #e6e6e6 !important;
  }

  /* ==========================================================================
     AI Summary Box (P2 specific)
     ========================================================================== */
  
  .ai-summary,
  [class*="ai-summary"],
  .wp-block-p2-ai-summary {
    background-color: #242424 !important;
    border-color: #3a3a3a !important;
    color: #c9c9c9 !important;
  }

  /* ==========================================================================
     Blockquotes
     ========================================================================== */
  
  blockquote {
    background-color: #1e2440 !important;
    border-left-color: #5b7aed !important;
    border-left-width: 4px;
    border-left-style: solid;
    color: #c9c9c9 !important;
  }

  blockquote p {
    color: #c9c9c9 !important;
  }

  /* ==========================================================================
     Code Blocks
     ========================================================================== */
  
  code,
  pre,
  pre code,
  .wp-block-code {
    background-color: #2d2d2d !important;
    color: #c9c9c9 !important;
    border-color: #3a3a3a !important;
  }

  /* Inline code */
  p code,
  li code {
    background-color: #2d2d2d !important;
    color: #c9c9c9 !important;
    padding: 0.15em 0.4em;
    border-radius: 3px;
  }

  /* ==========================================================================
     Forms & Inputs
     ========================================================================== */
  
  input,
  textarea,
  select {
    background-color: #2e2e2e !important;
    color: #e6e6e6 !important;
    border-color: #3a3a3a !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: #8c8c8c !important;
  }

  /* Buttons */
  button,
  input[type="submit"],
  input[type="button"],
  .button {
    background-color: #2e2e2e !important;
    color: #e6e6e6 !important;
    border-color: #3a3a3a !important;
  }

  button:hover,
  .button:hover {
    background-color: #3a3a3a !important;
  }

  /* ==========================================================================
     GitHub Embeds (P2 specific)
     ========================================================================== */
  
  .wp-block-p2-embed-github,
  [class*="wp-block-p2-embed"] {
    background-color: #242424 !important;
    border-color: #3a3a3a !important;
  }

  .wp-block-p2-embed-github__type-badge {
    background-color: #2e2e2e !important;
    color: #c9c9c9 !important;
  }

  /* ==========================================================================
     Tooltips & Popovers
     ========================================================================== */
  
  [role="tooltip"],
  .tooltip,
  .o2-tooltip {
    background-color: #242424 !important;
    color: #e6e6e6 !important;
    border-color: #3a3a3a !important;
  }

  /* ==========================================================================
     Borders & Dividers
     ========================================================================== */
  
  hr {
    border-color: #3a3a3a !important;
    background-color: #3a3a3a !important;
  }

  /* ==========================================================================
     Thread Links / Related Posts
     ========================================================================== */
  
  .o2-post-threads,
  .o2-thread-item {
    background-color: transparent !important;
    border-color: #3a3a3a !important;
  }

  /* ==========================================================================
     Action Bars / Post Footer
     ========================================================================== */
  
  .o2-actions,
  .o2-post-actions,
  .entry-actions {
    background-color: transparent !important;
  }

  .o2-actions a,
  .o2-post-actions a {
    color: #8c8c8c !important;
  }

  .o2-actions a:hover {
    color: #56a7d7 !important;
  }

  /* ==========================================================================
     Likes / Stars
     ========================================================================== */

  .o2-likes,
  .likes,
  [class*="like"] span {
    color: #8c8c8c !important;
  }

  /* ==========================================================================
     Lists (ensure visibility)
     ========================================================================== */
  
  ul, ol {
    color: #c9c9c9 !important;
  }

  li {
    background-color: transparent !important;
  }

  /* ==========================================================================
     Protected Media Elements
     ========================================================================== */
  
  img,
  video,
  iframe,
  canvas,
  .avatar,
  img.avatar,
  .wp-embedded-content {
    filter: none !important;
  }

  /* ==========================================================================
     Scrollbars (Webkit browsers)
     ========================================================================== */
  
  ::-webkit-scrollbar {
    background-color: #242424;
  }

  ::-webkit-scrollbar-thumb {
    background-color: #3a3a3a;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: #8c8c8c;
  }

  /* ==========================================================================
     Selection Highlight
     ========================================================================== */
  
  ::selection {
    background-color: #2c3e4a !important;
    color: #e6e6e6 !important;
  }

  ::-moz-selection {
    background-color: #2c3e4a !important;
    color: #e6e6e6 !important;
  }

}
